### **Ù…Ø¯ÛŒØ±ÛŒØª SnapshotØŒ ImportØŒ Ùˆ Restore Ø¯Ø± ZFS + Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø±Ø§ÛŒØ¬**  

ZFS Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ù‚Ø¯Ø±ØªÙ…Ù†Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ Ú¯Ø±ÙØªÙ† Ø§Ø³Ù†Ù¾â€ŒØ´Ø§Øª (Snapshot)ØŒ Ø§ÛŒÙ…Ù¾ÙˆØ±Øª Ùˆ Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¯Ø§Ø±Ø¯ Ú©Ù‡ Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø± Ù…ÙˆØ§Ù‚Ø¹ Ø¶Ø±ÙˆØ±ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ø¯Ø± Ø§Ø¯Ø§Ù…Ù‡ Ø§ÛŒÙ† Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ Ùˆ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø±Ø§ÛŒØ¬ ØªÙˆØ¶ÛŒØ­ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯.

---

## **1. Ø§ÛŒØ¬Ø§Ø¯ Snapshot (Ø°Ø®ÛŒØ±Ù‡ Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§)**  
Ø§Ø³Ù†Ù¾â€ŒØ´Ø§Øª Ø¯Ø± ZFS ÛŒÚ© Ù†Ø³Ø®Ù‡ ÙÙ‚Ø·â€ŒØ®ÙˆØ§Ù†Ø¯Ù†ÛŒ Ø§Ø² ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ù„ÛŒ ÙØ§ÛŒÙ„â€ŒØ³ÛŒØ³ØªÙ… Ø§Ø³Øª Ú©Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø¢Ù† Ø±Ø§ Ø¯Ø± Ø¢ÛŒÙ†Ø¯Ù‡ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ú©Ø±Ø¯.

ğŸ”¹ **Ø§ÛŒØ¬Ø§Ø¯ ÛŒÚ© Snapshot Ø³Ø§Ø¯Ù‡:**  
```bash
sudo zfs snapshot mypool/mydataset@snap1
```
Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ± ÛŒÚ© Ø§Ø³Ù†Ù¾â€ŒØ´Ø§Øª Ø¨Ù‡ Ù†Ø§Ù… `snap1` Ø§Ø² Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø¯Ø§Ø¯Ù‡ `mypool/mydataset` Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

ğŸ”¹ **Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø³Ù†Ù¾â€ŒØ´Ø§Øªâ€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯:**  
```bash
zfs list -t snapshot
```

ğŸ”¹ **Ø­Ø°Ù ÛŒÚ© Snapshot Ø®Ø§Øµ:**  
```bash
sudo zfs destroy mypool/mydataset@snap1
```

ğŸ”¹ **Ø­Ø°Ù ØªÙ…Ø§Ù… SnapshotÙ‡Ø§ÛŒ ÛŒÚ© Ù¾ÙˆÙ„ Ø®Ø§Øµ:**  
```bash
sudo zfs destroy -r mypool/mydataset@snap1
```

---

## **2. Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ Ø§Ø² Snapshot (Revert to Snapshot)**  
Ø§Ú¯Ø± Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø§Ø² Ø¯Ø³Øª Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒØ¯ ÛŒØ§ ØªØºÛŒÛŒØ±Ø§Øª Ù†Ø§Ù…Ø·Ù„ÙˆØ¨ÛŒ Ø±Ø® Ø¯Ø§Ø¯Ù‡ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ù‡ ÛŒÚ© Ø§Ø³Ù†Ù¾â€ŒØ´Ø§Øª Ù‚Ø¨Ù„ÛŒ Ø¨Ø§Ø²Ú¯Ø±Ø¯ÛŒØ¯.

ğŸ”¹ **Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù† ÛŒÚ© Ø§Ø³Ù†Ù¾â€ŒØ´Ø§Øª (Ù‡Ù…Ù‡ ØªØºÛŒÛŒØ±Ø§Øª Ø¬Ø¯ÛŒØ¯ Ø­Ø°Ù Ù…ÛŒâ€ŒØ´ÙˆØ¯!):**  
```bash
sudo zfs rollback mypool/mydataset@snap1
```
â›” **Ù‡Ø´Ø¯Ø§Ø±:** Ø§ÛŒÙ† Ú©Ø§Ø± **ØªÙ…Ø§Ù… ØªØºÛŒÛŒØ±Ø§Øª Ù¾Ø³ Ø§Ø² snapshot** Ø±Ø§ Ø­Ø°Ù Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

ğŸ”¹ **Ø§Ú¯Ø± Ø¨Ø¹Ø¯ Ø§Ø² snapshotØŒ Ø§Ø³Ù†Ù¾â€ŒØ´Ø§Øªâ€ŒÙ‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø±ÛŒ Ù‡Ù… Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯ØŒ Ø¨Ø§ÛŒØ¯ Ø§Ø² `-r` Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯:**  
```bash
sudo zfs rollback -r mypool/mydataset@snap1
```

---

## **3. Export Ùˆ Import Ú©Ø±Ø¯Ù† ÛŒÚ© Pool (Ø§Ù†ØªÙ‚Ø§Ù„ Ù¾ÙˆÙ„ Ø¨ÛŒÙ† Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§)**  
Ø§Ú¯Ø± Ø¨Ø®ÙˆØ§Ù‡ÛŒØ¯ ÛŒÚ© Ù¾ÙˆÙ„ ZFS Ø±Ø§ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ… Ø¯ÛŒÚ¯Ø±ÛŒ Ù…Ù†ØªÙ‚Ù„ Ú©Ù†ÛŒØ¯ØŒ Ø¨Ø§ÛŒØ¯ Ø§Ø² `export` Ùˆ `import` Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.

ğŸ”¹ **Export Ú©Ø±Ø¯Ù† ÛŒÚ© Pool (Ù‚Ø·Ø¹ Ø§Ø±ØªØ¨Ø§Ø· Ø§Ø² Ø³ÛŒØ³ØªÙ…):**  
```bash
sudo zpool export mypool
```
Ø¨Ø¹Ø¯ Ø§Ø² Ø§ÛŒÙ† Ú©Ø§Ø±ØŒ Ø³ÛŒØ³ØªÙ… Ø¯ÛŒÚ¯Ø± Ø§ÛŒÙ† Ù¾ÙˆÙ„ Ø±Ø§ Ù†Ù…ÛŒâ€ŒØ´Ù†Ø§Ø³Ø¯ Ùˆ Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø¢Ù† Ø±Ø§ Ø±ÙˆÛŒ Ø³ÛŒØ³ØªÙ… Ø¯ÛŒÚ¯Ø±ÛŒ Ù…ØªØµÙ„ Ú©Ø±Ø¯.

ğŸ”¹ **Import Ú©Ø±Ø¯Ù† ÛŒÚ© Pool Ø¯Ø± Ø³ÛŒØ³ØªÙ… Ø¬Ø¯ÛŒØ¯:**  
```bash
sudo zpool import mypool
```
Ø§Ú¯Ø± ZFS Ù¾ÙˆÙ„ Ø±Ø§ Ø¨Ù‡â€ŒØ·ÙˆØ± Ø®ÙˆØ¯Ú©Ø§Ø± Ù¾ÛŒØ¯Ø§ Ù†Ú©Ù†Ø¯ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² Ú¯Ø²ÛŒÙ†Ù‡ `-d` Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø®Øµ Ú©Ø±Ø¯Ù† Ù…Ø³ÛŒØ± Ø¯ÛŒØ³Ú©â€ŒÙ‡Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯:
```bash
sudo zpool import -d /dev/disk/by-id mypool
```

ğŸ”¹ **Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù„ÛŒØ³Øª Ù¾ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Export Ø´Ø¯Ù‡ (Ø¨Ø¯ÙˆÙ† Import Ú©Ø±Ø¯Ù†):**  
```bash
sudo zpool import
```

ğŸ”¹ **Import ÛŒÚ© Ù¾ÙˆÙ„ Ø¨Ø§ Ù†Ø§Ù… Ø¬Ø¯ÛŒØ¯ (Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² ØªØ¯Ø§Ø®Ù„ Ø¨Ø§ ÛŒÚ© Ù¾ÙˆÙ„ Ù‡Ù…Ù†Ø§Ù…):**  
```bash
sudo zpool import mypool newpool
```

ğŸ”¹ **Ø§Ú¯Ø± Ø®Ø·Ø§ÛŒ "Pool is already in use" Ø¯Ø±ÛŒØ§ÙØª Ú©Ø±Ø¯ÛŒØ¯:**  
Ø§ÛŒÙ† Ù…Ø´Ú©Ù„ Ø²Ù…Ø§Ù†ÛŒ Ø±Ø® Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ú©Ù‡ ZFS ÙÚ©Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ù¾ÙˆÙ„ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø³Øª. Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø¨Ø§ Ø§Ø¬Ø¨Ø§Ø± Ø¢Ù† Ø±Ø§ Ø§ÛŒÙ…Ù¾ÙˆØ±Øª Ú©Ø±Ø¯:
```bash
sudo zpool import -f mypool
```

---

## **4. Ø§Ø±Ø³Ø§Ù„ Ùˆ Ø¯Ø±ÛŒØ§ÙØª SnapshotÙ‡Ø§ (Backup & Restore Ø±ÙˆÛŒ Ø³ÛŒØ³ØªÙ… Ø¯ÛŒÚ¯Ø±)**  
Ø§Ú¯Ø± Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ ÛŒÚ© Ø§Ø³Ù†Ù¾â€ŒØ´Ø§Øª Ø±Ø§ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ… Ø¯ÛŒÚ¯Ø±ÛŒ Ù…Ù†ØªÙ‚Ù„ Ú©Ù†ÛŒØ¯ØŒ Ø§Ø² `zfs send` Ùˆ `zfs receive` Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.

ğŸ”¹ **Ø§Ø±Ø³Ø§Ù„ ÛŒÚ© Snapshot Ø¨Ù‡ ÙØ§ÛŒÙ„ (Ø¨Ø±Ø§ÛŒ Ø¨Ú©Ø§Ù¾â€ŒÚ¯ÛŒØ±ÛŒ):**  
```bash
sudo zfs send mypool/mydataset@snap1 > /mnt/backup/snap1.img
```

ğŸ”¹ **Ø¯Ø±ÛŒØ§ÙØª Ùˆ Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ ÛŒÚ© Snapshot (Ø±ÙˆÛŒ ÛŒÚ© Ø³ÛŒØ³ØªÙ… Ø¬Ø¯ÛŒØ¯):**  
```bash
sudo zfs receive mypool/newdataset < /mnt/backup/snap1.img
```

ğŸ”¹ **Ø§Ø±Ø³Ø§Ù„ Snapshot Ø¨Ù‡ ÛŒÚ© Ø³ÛŒØ³ØªÙ… Ø¯ÛŒÚ¯Ø± Ø§Ø² Ø·Ø±ÛŒÙ‚ SSH:**  
```bash
sudo zfs send mypool/mydataset@snap1 | ssh user@remote-host sudo zfs receive remote_pool/newdataset
```

---

## **5. Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø±Ø§ÛŒØ¬ Ø¯Ø± ZFS Ùˆ Ø±Ø§Ù‡â€ŒØ­Ù„â€ŒÙ‡Ø§**

### **1. Ø®Ø·Ø§ÛŒ "pool is already in use" Ù‡Ù†Ú¯Ø§Ù… Import**
ğŸ“Œ **Ø¹Ù„Øª:** Ø§ÛŒÙ† Ù…Ø´Ú©Ù„ Ø²Ù…Ø§Ù†ÛŒ Ø±Ø® Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ú©Ù‡ Ø³ÛŒØ³ØªÙ… ÙÚ©Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ù¾ÙˆÙ„ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø³Øª.  
âœ… **Ø±Ø§Ù‡â€ŒØ­Ù„:**  
```bash
sudo zpool import -f mypool
```

---

### **2. Ø®Ø·Ø§ÛŒ "device is busy" Ù‡Ù†Ú¯Ø§Ù… Export Ú©Ø±Ø¯Ù† ÛŒÚ© Pool**
ğŸ“Œ **Ø¹Ù„Øª:** ÛŒÚ©ÛŒ Ø§Ø² Ø¯ÛŒØ³Ú©â€ŒÙ‡Ø§ÛŒ Ù¾ÙˆÙ„ Ù‡Ù†ÙˆØ² Ø¯Ø± Ø­Ø§Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø³Øª.  
âœ… **Ø±Ø§Ù‡â€ŒØ­Ù„:**  
Ø§Ø¨ØªØ¯Ø§ Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ Ú©Ù‡ Ù‡ÛŒÚ† ÙØ±Ø§ÛŒÙ†Ø¯ÛŒ Ø§Ø² Ø§ÛŒÙ† Ù¾ÙˆÙ„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯:
```bash
sudo lsof | grep mypool
```
Ø³Ù¾Ø³ØŒ Ù¾ÙˆÙ„ Ø±Ø§ Ø¨Ø§ Ø§Ø¬Ø¨Ø§Ø± Export Ú©Ù†ÛŒØ¯:
```bash
sudo zpool export -f mypool
```

---

### **3. Ø®Ø·Ø§ÛŒ "no pools available to import" Ù‡Ù†Ú¯Ø§Ù… Import**
ğŸ“Œ **Ø¹Ù„Øª:** Ø³ÛŒØ³ØªÙ… Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¯ÛŒØ³Ú©â€ŒÙ‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ù¾ÙˆÙ„ Ø±Ø§ Ù¾ÛŒØ¯Ø§ Ú©Ù†Ø¯.  
âœ… **Ø±Ø§Ù‡â€ŒØ­Ù„:** Ù…Ø³ÛŒØ± Ø¯ÛŒØ³Ú©â€ŒÙ‡Ø§ Ø±Ø§ Ù…Ø´Ø®Øµ Ú©Ù†ÛŒØ¯:
```bash
sudo zpool import -d /dev/disk/by-id
```

---

### **4. Ø®Ø·Ø§ÛŒ "cannot mount dataset" Ù‡Ù†Ú¯Ø§Ù… Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Snapshot**
ğŸ“Œ **Ø¹Ù„Øª:** Ø³ÛŒØ³ØªÙ… Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø¯Ø§Ø¯Ù‡ (dataset) Ø±Ø§ Ù¾Ø³ Ø§Ø² Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ Ø§Ø³Ù†Ù¾â€ŒØ´Ø§ØªØŒ Ù…ØªØµÙ„ (mount) Ú©Ù†Ø¯.  
âœ… **Ø±Ø§Ù‡â€ŒØ­Ù„:** Ø§Ø¨ØªØ¯Ø§ mount Ø±Ø§ ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ù†ÛŒØ¯ Ùˆ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ÙØ¹Ø§Ù„ Ú©Ù†ÛŒØ¯:
```bash
sudo zfs set mountpoint=legacy mypool/mydataset
sudo mount -t zfs mypool/mydataset /mnt
```

---

### **5. Ø®Ø·Ø§ÛŒ "checksum errors detected" Ù‡Ù†Ú¯Ø§Ù… Ø§Ø¬Ø±Ø§ÛŒ `zpool status`**
ğŸ“Œ **Ø¹Ù„Øª:** ÛŒÚ©ÛŒ Ø§Ø² Ø¯ÛŒØ³Ú©â€ŒÙ‡Ø§ÛŒ Ù¾ÙˆÙ„ Ø¯Ø§Ø±Ø§ÛŒ Ù…Ø´Ú©Ù„Ø§Øª Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø§Ø³Øª.  
âœ… **Ø±Ø§Ù‡â€ŒØ­Ù„:** Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø¯ÛŒØ³Ú©:
```bash
sudo zpool scrub mypool
```
Ø§Ú¯Ø± Ù…Ø´Ú©Ù„ Ø­Ù„ Ù†Ø´Ø¯ØŒ Ù…Ù…Ú©Ù† Ø§Ø³Øª Ù†ÛŒØ§Ø² Ø¨Ù‡ **ØªØ¹ÙˆÛŒØ¶ Ø¯ÛŒØ³Ú© Ø®Ø±Ø§Ø¨** Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯:
```bash
sudo zpool replace mypool /dev/sdb
```

---

### **Ø¬Ù…Ø¹â€ŒØ¨Ù†Ø¯ÛŒ**
- Ø¨Ø±Ø§ÛŒ Ú¯Ø±ÙØªÙ† Ø§Ø³Ù†Ù¾â€ŒØ´Ø§Øª: `zfs snapshot mypool/mydataset@snap1`
- Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ Ø§Ø² Ø§Ø³Ù†Ù¾â€ŒØ´Ø§Øª: `zfs rollback mypool/mydataset@snap1`
- Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªÙ‚Ø§Ù„ Ø§Ø³Ù†Ù¾â€ŒØ´Ø§Øª Ø¨Ù‡ ÙØ§ÛŒÙ„: `zfs send`
- Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ Ø§Ø² ÙØ§ÛŒÙ„ Ø¨Ú©Ø§Ù¾: `zfs receive`
- Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªÙ‚Ø§Ù„ Ù¾ÙˆÙ„ Ø¨ÛŒÙ† Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§: `zpool export` Ùˆ `zpool import`
- Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø´Ú©Ù„Ø§Øª Ø¯ÛŒØ³Ú©: `zpool scrub`
