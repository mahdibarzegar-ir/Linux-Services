

### اگر دیسک شما از نوع **GPT (GUID Partition Table)** باشد:

🔸 استفاده از `fdisk` **مناسب نیست** یا ممکن است محدودیت داشته باشد. در این حالت، باید از ابزارهای زیر استفاده کنید:

#### 1. `gdisk` (GPT fdisk)

نسخه مشابه `fdisk` ولی برای دیسک‌های GPT.

```bash
sudo gdisk /dev/sdX
```

#### 2. `parted`

ابزاری قدرتمند که هم برای MBR و هم GPT قابل استفاده است و از پارتیشن‌بندی داینامیک پشتیبانی می‌کند.

```bash
sudo parted /dev/sdX
```

####  ابزار گرافیکی `gparted`

اگر به محیط گرافیکی دسترسی دارید، `gparted` یکی از امن‌ترین و ساده‌ترین گزینه‌هاست.

---

### چگونه بفهمم دیسکم MBR است یا GPT؟

برای بررسی نوع جدول پارتیشن دیسک، از دستور زیر استفاده کنید:

```bash
sudo parted /dev/sdX print
```

در خروجی، اگر چیزی مانند این دیدید:

```
Partition Table: msdos
```

یعنی MBR است.

و اگر دیدید:

```
Partition Table: gpt
```

یعنی GPT است.

---

 اگر دسترسی به محیط گرافیکی نداریم (مثل GParted) و فقط با **خط فرمان (کامند لاین)** در حال کار هستیم باز هم می‌تونیم فضای دیسک رو به پارتیشن LVM اضافه کنیم. این فرایند شامل ۳ مرحله اصلیه:

## ✅ مرحله ۱: بررسی فضای آزاد در دیسک

ابتدا ببین آیا فضای خالی در انتهای دیسک `/dev/sda` وجود داره:

```bash
sudo parted /dev/sda print free
```

اگر در خروجی دیدی که فضای **"Free Space"** بعد از `sdaN` هست (مثلاً ۳۰ گیگ یا بیشتر)، یعنی شرایط برای گسترش فراهمه.

---

## ✅ مرحله ۲: گسترش پارتیشن `sdaN` با `parted`

### ⚠️ نکته مهم:

قبل از ادامه، حتماً از اطلاعاتت بک‌آپ داشته باش، چون هر اشتباه کوچیکی ممکنه باعث از بین رفتن پارتیشن بشه.

حالا برای گسترش `sdaN`، از `parted` استفاده می‌کنیم:

```bash
sudo parted /dev/sda
```

سپس در محیط تعاملی `parted` این دستورات رو وارد کن:

```bash
(parted) print
```
(اینجا میخوایم پارتیشن sda3 رو که به / اشاره داره رو زیاد کنیم)

ببین `Number` مربوط به `sda3` چند هست (احتمالاً 3)، بعد:

```bash
(parted) resizepart 3 100%
```

در اینجا `3` شماره پارتیشنه و `100%` یعنی تا انتهای دیسک گسترش بده.

بعدش خارج شو:

```bash
(parted) quit
```

---

## ✅ مرحله ۳: بزرگ کردن فضای LVM

حالا که پارتیشن `sda3` بزرگ شده، وقتشه که فضای فیزیکی LVM رو گسترش بدیم:

```bash
sudo pvresize /dev/sda3
```

بررسی کن که فضای آزاد اضافه شده:

```bash
sudo vgdisplay
```

در قسمت `Free PE / Size` باید مقداری فضای آزاد (مثلاً 30 GiB) ببینی.

---

## ✅ مرحله ۴: گسترش Logical Volume و فایل‌سیستم

حالا کل فضای آزاد رو به LV بده:

```bash
sudo lvextend -l +100%FREE /dev/ubuntu-vg/ubuntu-lv
```

سپس فایل‌سیستم رو هم گسترش بده:

اگر ext4 هست:

```bash
sudo resize2fs /dev/ubuntu-vg/ubuntu-lv
```

اگر xfs هست:

```bash
sudo xfs_growfs /
```

---

## ✅ مرحله نهایی: بررسی

```bash
df -h /
```

حالا باید حجم پارتیشن root به چیزی نزدیک به حجم اکستند شده  رسیده باشه.

---

